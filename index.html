<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HydroSmart Hydroponics</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Yeseva+One&display=swap" rel="stylesheet" />
</head>

<body>
    <header>
        <div class="header-left">
            <button id="toggleSidebar" class="hamburger" aria-label="Toggle sidebar">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <h1>Hydroponics</h1>
        <nav>
            <ul class="nav-links">
                <li class="notification-wrapper">
                    <a href="#" id="btnNotifications" aria-label="Notifications">
                        ðŸ”” <span id="notifCount" class="badge">3</span>
                    </a>
                    <ul id="notificationDropdown" class="dropdown hidden">
                        <!-- Notifications will be injected here -->
                    </ul>
                </li>
                <li><button id="btnArticle">Home</button></li>
                <li><button id="btnTable">Table</button></li>
                <li><button id="btnChart">Chart</button></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <aside id="sidebar" class="sidebar-collapsed">
            <ul>
                <li><a href="index.html" class="active">Home</a></li>
                <li><a href="html/crop_profile.html">Crop Profile</a></li>
                <li><a href="html/about.html">About</a></li>
                <li><a href="html/contacts.html">Contact</a></li>
            </ul>
        </aside>

        <main id="article-section" class="content-section">
            <section>
                <div id="weatherUpdate">
                    <h3>Weather Forecast</h3>
                    <p id="weatherMessage">Loading weather data...</p>
                </div>

                <h2>Yesterday's Summary</h2>

                <div class="home-summary">
                    <div class="card">
                        <h3>Average Light</h3>
                        <div id="avgLight">â€”</div>
                    </div>

                    <div class="card">
                        <h3>Average Temperature (Â°C)</h3>
                        <div id="avgTemp">â€”</div>
                    </div>

                    <div class="card">
                        <h3>Average Humidity (%)</h3>
                        <div id="avgHum">â€”</div>
                    </div>

                    <div class="card">
                        <h3>Average Moisture (%)</h3>
                        <div id="avgMoist">â€”</div>
                    </div>

                    <div class="card">
                        <h3>Average pH</h3>
                        <div id="avgPH">â€”</div>
                    </div>

                    <div class="card">
                        <h3>Records (today)</h3>
                        <div id="todayCount">0</div>
                    </div>
                </div>

                <p id="homeUpdated">Last updated: â€”</p>

                <div id="waterAlert">
                    <p id="waterMessage">
                        Soil moisture of the garden is dropping, click to water manually
                    </p>
                    <button id="btnWater">Water Now</button>
                </div>
            </section>
        </main>

        <main id="table-section" class="content-section hidden">
            <section>
                <h2>Crop Data Table</h2>
                <div class="crop-block">
                    <div class="table-controls">
                        <label for="dateSelect">Show data for day:</label>
                        <input type="date" id="dateSelect" />
                        <button id="btnFilterDate">Filter</button>
                        <button id="btnClearDate">Clear</button>
                        <span id="tableStatus" aria-live="polite"></span>
                    </div>

                    <table id="dataTable">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Light</th>
                                <th>Temperature</th>
                                <th>Humidity</th>
                                <th>Moisture</th>
                                <th>pH</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody"></tbody>
                    </table>
                </div>
            </section>
        </main>

        <main id="chart-section" class="content-section hidden">
            <section>
                <h2>Crop Data Visualization</h2>
                <div class="chart-block">
                    <h3>Crop: Lettuce</h3>
                    <div class="chart-header">
                        <label for="chartDateSelect">Show data for day:</label>
                        <input type="date" id="chartDateSelect" />
                        <button id="btnFilterChart">Apply</button>
                        <button id="btnClearChart">Clear</button>
                        <span id="chartStatus" aria-live="polite"></span>
                        <div class="chart-controls">
                            <label>Chart Type:</label>
                            <select id="chartType">
                                <option value="line">Line</option>
                                <option value="bar">Bar</option>
                                <option value="area">Area</option>
                            </select>
                            <label>Parameter:</label>
                            <select id="parameterSelect">
                                <option value="all">All</option>
                                <option value="light">Light</option>
                                <option value="temperature">Temperature</option>
                                <option value="humidity">Humidity</option>
                                <option value="moisture">Moisture</option>
                                <option value="ph">pH</option>
                            </select>
                        </div>
                    </div>
                    <div id="dataChart"></div>
                    <p id="analysisText"></p>
                </div>
            </section>
        </main>
    </div>

    <footer>
        <p>&copy; 2025 Hydroponics</p>
    </footer>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const btnWater = document.getElementById("btnWater");
            const waterAlert = document.getElementById("waterAlert");
            const waterMessage = document.getElementById("waterMessage");

            if (btnWater && waterAlert && waterMessage) {
                btnWater.addEventListener("click", () => {
                    const confirmAction = confirm("Soil moisture is low. Do you want to water manually?");
                    if (confirmAction) {
                        // Change message
                        waterMessage.textContent = "Garden watered successfully, you're good for the next few hours";

                        // Change alert styling to bluish green theme
                        waterAlert.style.background = "#f9f9f9";        // neutral light gray background
                        waterAlert.style.color = "#232323";             // dark text for contrast
                        waterAlert.style.border = "1px solid #ddd";     // thin, subtle border
                        waterAlert.style.boxShadow = "0 2px 6px rgba(0,0,0,0.1)"; // soft shadow to stand out


                        // Disable button
                        btnWater.textContent = "Watering...";
                        btnWater.disabled = true;
                        btnWater.style.opacity = "0.6";
                        btnWater.style.cursor = "not-allowed";
                    }
                });
            }
        });
    </script>
    <script src="js/weather.js"></script>
    <script src="js/apexcharts.min.js"></script>
    <script src="js/script.js"></script>
    <script src="js/buttons.js"></script>
</body>

</html>